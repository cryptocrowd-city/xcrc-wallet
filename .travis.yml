language: cpp
compiler:
  - gcc
before_install:
  - sudo add-apt-repository ppa:bitcoin/bitcoin -y
  - sudo apt-get update -qq
  - sudo apt-get install -qq build-essential libtool autotools-dev autoconf pkg-config libssl-dev libminiupnpc-dev libboost-all-dev libdb4.8-dev libdb4.8++-dev libevent-dev
script:
  - ./autogen.sh
  - ./configure
  - make -s -l 2.5 -j 4
before_deploy:
- true
# Set up git user name and tag this commit
- git config --local user.name "YOUR GIT USER NAME"
- git config --local user.email "YOUR GIT USER EMAIL"
- export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}
- git tag $TRAVIS_TAG
deploy:
  provider: releases
  api_key: ${GH_TOKEN}
  file_glob: true
  file: bulwark*
  overwrite: true
  skip_cleanup: true
